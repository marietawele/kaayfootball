<div class="modal-header" data-bs-theme="ligth">
  <h1 class="modal-title fs-5">Abonnement</h1>
  <div class="d-flex ms-5">
    <button class="btn btn-primary" (click)="openModal_add_type_abonnement()">
      <i class="bi bi-calendar-plus-fill"></i> Type Abonnements
    </button>
  </div>
  <button
    type="button"
    class="btn-close"
    aria-label="Close"
    (click)="activeModal.close()"
  ></button>
</div>
<div class="modal-body">
  <form
    [formGroup]="reactiveForm_add_abonnement"
    (ngSubmit)="onSubmit_add_abonnement()"
    #form_add_abonnement="ngForm"
    class="row"
  >
    <!-- Champ Id Type Abonnement (Clé étrangère vers type_abonnement) -->
    <div class="form-group col-sm-12 col-md-6 mb-4">
      <label class="mb-2"
        >Type Abonnement <span class="text-danger">*</span></label
      >
      <select
        [ngClass]="{ 'is-invalid': submitted && f.id_type_abonnement.errors }"
        class="form-select"
        formControlName="id_type_abonnement"
      >
        <option value="">Sélectionnez un(e) Type Abonnement</option>
        @for (one_type_abonnement of form_details?.les_type_abonnements; track
        $index) {
        <option [value]="one_type_abonnement.id_type_abonnement">
          {{ one_type_abonnement.libelle_type_abonnement }}
        </option>
        }
      </select>
      @if (submitted && f.id_type_abonnement.errors) {
      <div class="invalid-feedback">
        @if (f.id_type_abonnement.errors.required) {
        <div>Ce champ est obligatoire</div>
        }
      </div>
      }
    </div>

    <!-- Champ Libelle Abonnement -->
    <div class="form-group col-sm-12 col-md-6 mb-4">
      <label class="mb-2"
        >Libelle Abonnement <span class="text-danger">*</span></label
      >
      <input
        class="form-control"
        type="text"
        formControlName="libelle_abonnement"
        placeholder="Libelle Abonnement"
        [ngClass]="{ 'is-invalid': submitted && f.libelle_abonnement.errors }"
      />
      @if (submitted && f.libelle_abonnement.errors) {
      <div class="invalid-feedback">
        @if (f.libelle_abonnement.errors.required) {
        <div>Ce champ est obligatoire</div>
        }
      </div>
      }
    </div>

    <!-- Champ Date Debut -->
    <div class="form-group col-sm-6 col-md-6 mb-4">
      <label class="mb-2">Date Debut <span class="text-danger">*</span></label>
      <input
        class="form-control"
        type="date"
        formControlName="date_debut"
        placeholder="Date Debut"
        [ngClass]="{ 'is-invalid': submitted && f.date_debut.errors }"
      />
      @if (submitted && f.date_debut.errors) {
      <div class="invalid-feedback">
        @if (f.date_debut.errors.required) {
        <div>Ce champ est obligatoire</div>
        }
      </div>
      }
    </div>

    <!-- Champ Date Fin -->
    <div class="form-group col-sm-6 col-md-6 mb-4">
      <label class="mb-2">Date Fin <span class="text-danger">*</span></label>
      <input
        class="form-control"
        type="date"
        formControlName="date_fin"
        placeholder="Date Fin"
        [ngClass]="{ 'is-invalid': submitted && f.date_fin.errors }"
      />
      @if (submitted && f.date_fin.errors) {
      <div class="invalid-feedback">
        @if (f.date_fin.errors.required) {
        <div>Ce champ est obligatoire</div>
        }
      </div>
      }
    </div>

    <!-- Champ Etat
            <div class="form-group col-sm-6">
              <label class="mb-2" >Etat</label >
              <input class="form-control"
                     type="text"
                     formControlName="etat"
                     placeholder="Etat"
                     [ngClass]="{ 'is-invalid': submitted && f.etat.errors }"/>
              @if (submitted && f.etat.errors) {
                <div class="invalid-feedback">
                  @if (f.etat.errors.required) {
                    <div>Ce champ est obligatoire</div>
                  }
                </div>
              }
            </div> -->

    <!-- Champ Reduction -->
    <div class="form-group col-sm-12">
      <label class="mb-2">Reduction</label>
      <input
        class="form-control"
        type="number"
        formControlName="reduction"
        placeholder="10 --%"
        [ngClass]="{ 'is-invalid': submitted && f.reduction.errors }"
      />
      @if (submitted && f.reduction.errors) {
      <div class="invalid-feedback">
        @if (f.reduction.errors.required) {
        <div>Ce champ est obligatoire</div>
        }
      </div>
      }
    </div>
  </form>
</div>
<div class="modal-footer">
  <button
    type="button"
    class="btn btn-primary m-2"
    [disabled]="
      loading_add_abonnement || loading_get_details_add_abonnement_form
    "
    (click)="form_add_abonnement.ngSubmit.emit()"
  >
    {{ loading_add_abonnement ? "En cours ..." : "Valider" }}
  </button>
  <button
    type="button"
    class="btn btn-outline-danger"
    (click)="activeModal.close()"
  >
    Fermer
  </button>
</div>
